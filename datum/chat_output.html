<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;chat_output - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/chat_output.html#var">Var Details</a> - <a href="datum/chat_output.html#proc">Proc Details</a></header>
<main>
<h1>/<a href="datum.html">datum</a>/<a href="datum/chat_output.html">chat_output</a>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L12">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 12"/></a></h1>

<p>The chatOutput datum exists to handle the goonchat browser.
On client, created on Client/New()</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/chat_output.html#var/loaded">loaded</a></th><td>Has the client loaded the browser output area?</td></tr>
            <tr><th><a href="datum/chat_output.html#var/messageQueue">messageQueue</a></th><td>If they haven't loaded chat, this is where messages will go until they do</td></tr>
            <tr><th><a href="datum/chat_output.html#var/next_time_to_clear">next_time_to_clear</a></th><td>When to next clear the client data checks counter</td></tr>
            <tr><th><a href="datum/chat_output.html#var/owner">owner</a></th><td>The client that owns us.</td></tr>
            <tr><th><a href="datum/chat_output.html#var/total_checks">total_checks</a></th><td>How many times client data has been checked</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/chat_output.html#proc/Topic">Topic</a></th><td>Interprets input from the client. Will send data back if required.</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/analyzeClientData">analyzeClientData</a></th><td>Called by client, sent data to investigate (cookie history so far)</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/debug">debug</a></th><td>Called by js client on js error</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/doneLoading">doneLoading</a></th><td>Called on chat output done-loading by JS.</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/ehjax_send">ehjax_send</a></th><td>Sends json encoded data to the browser.</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/load">load</a></th><td>Loads goonchat and sends assets.</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/ping">ping</a></th><td>Called by js client every 60 seconds</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/sendClientData">sendClientData</a></th><td>Sends client connection details to the chat to handle and save</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/sendMusic">sendMusic</a></th><td>Sends music data to the browser. If enabled by the browser, it will start playing.
Arguments:
music must be a https adress.
extra_data is a list. The keys &quot;pitch&quot;, &quot;start&quot; and &quot;end&quot; are used.</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/setMusicVolume">setMusicVolume</a></th><td>Setter for adminMusicVolume. Sanitizes the value to between 0 and 100.</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/showChat">showChat</a></th><td>Hides the standard output and makes the browser visible.</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/start">start</a></th><td>start: Tries to load the chat browser
Aborts if a problem is encountered.
Async because this is called from Client/New.</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/stopMusic">stopMusic</a></th><td>Stops music playing throw the browser.</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/swaptodarkmode">swaptodarkmode</a></th><td>Light mode stuff. (See darkmode.dm for documentation)</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/swaptolightmode">swaptolightmode</a></th><td>Dark mode light mode stuff. Yell at KMC if this breaks! (See darkmode.dm for documentation)</td></tr>
            <tr><th><a href="datum/chat_output.html#proc/syncRegex">syncRegex</a></th><td>Used to dynamically add regexes to the browser output. Currently only used by the IC filter.</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/loaded"><aside class="declaration">var </aside>loaded
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L20">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 20"/></a></h3>
        <p>Has the client loaded the browser output area?</p><h3 id="var/messageQueue"><aside class="declaration">var </aside>messageQueue
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L22">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 22"/></a></h3>
        <p>If they haven't loaded chat, this is where messages will go until they do</p><h3 id="var/next_time_to_clear"><aside class="declaration">var </aside>next_time_to_clear
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L18">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 18"/></a></h3>
        <p>When to next clear the client data checks counter</p><h3 id="var/owner"><aside class="declaration">var </aside>owner
            <aside>&ndash; /<a href="client.html">client</a></aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L14">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 14"/></a></h3>
        <p>The client that owns us.</p><h3 id="var/total_checks"><aside class="declaration">var </aside>total_checks
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L16">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 16"/></a></h3>
        <p>How many times client data has been checked</p><h2 id="proc">Proc Details</h2><h3 id="proc/Topic"><aside class="parent"><a title="/datum" href="datum.html#proc/Topic">&uarr;</a></aside>Topic<aside>(href, /list/href_list) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L71">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 71"/></a></aside>
        </h3>
        <p>Interprets input from the client. Will send data back if required.</p><h3 id="proc/analyzeClientData"><aside class="declaration">proc </aside>analyzeClientData<aside>(cookie) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L206">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 206"/></a></aside>
        </h3>
        <p>Called by client, sent data to investigate (cookie history so far)</p><h3 id="proc/debug"><aside class="declaration">proc </aside>debug<aside>(error) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L257">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 257"/></a></aside>
        </h3>
        <p>Called by js client on js error</p><h3 id="proc/doneLoading"><aside class="declaration">proc </aside>doneLoading<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L111">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 111"/></a></aside>
        </h3>
        <p>Called on chat output done-loading by JS.</p><h3 id="proc/ehjax_send"><aside class="declaration">proc </aside>ehjax_send<aside>(/<a href="client.html">client</a>/C, window, data) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L160">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 160"/></a></aside>
        </h3>
        <p>Sends json encoded data to the browser.</p><h3 id="proc/load"><aside class="declaration">proc </aside>load<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L60">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 60"/></a></aside>
        </h3>
        <p>Loads goonchat and sends assets.</p><h3 id="proc/ping"><aside class="declaration">proc </aside>ping<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L253">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 253"/></a></aside>
        </h3>
        <p>Called by js client every 60 seconds</p><h3 id="proc/sendClientData"><aside class="declaration">proc </aside>sendClientData<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L196">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 196"/></a></aside>
        </h3>
        <p>Sends client connection details to the chat to handle and save</p><h3 id="proc/sendMusic"><aside class="declaration">proc </aside>sendMusic<aside>(music, /list/extra_data) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L174">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 174"/></a></aside>
        </h3>
        <p>Sends music data to the browser. If enabled by the browser, it will start playing.
Arguments:
music must be a https adress.
extra_data is a list. The keys &quot;pitch&quot;, &quot;start&quot; and &quot;end&quot; are used.</p>
<ul>
<li>&quot;pitch&quot; determines the playback rate</li>
<li>&quot;start&quot; determines the start time of the sound</li>
<li>&quot;end&quot; determines when the musics stops playing</li>
</ul><h3 id="proc/setMusicVolume"><aside class="declaration">proc </aside>setMusicVolume<aside>(volume) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L191">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 191"/></a></aside>
        </h3>
        <p>Setter for adminMusicVolume. Sanitizes the value to between 0 and 100.</p><h3 id="proc/showChat"><aside class="declaration">proc </aside>showChat<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L133">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 133"/></a></aside>
        </h3>
        <p>Hides the standard output and makes the browser visible.</p><h3 id="proc/start"><aside class="declaration">proc </aside>start<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L38">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 38"/></a></aside>
        </h3>
        <p>start: Tries to load the chat browser
Aborts if a problem is encountered.
Async because this is called from Client/New.</p><h3 id="proc/stopMusic"><aside class="declaration">proc </aside>stopMusic<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L187">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 187"/></a></aside>
        </h3>
        <p>Stops music playing throw the browser.</p><h3 id="proc/swaptodarkmode"><aside class="declaration">proc </aside>swaptodarkmode<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L328">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 328"/></a></aside>
        </h3>
        <p>Light mode stuff. (See darkmode.dm for documentation)</p><h3 id="proc/swaptolightmode"><aside class="declaration">proc </aside>swaptolightmode<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L324">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 324"/></a></aside>
        </h3>
        <p>Dark mode light mode stuff. Yell at KMC if this breaks! (See darkmode.dm for documentation)</p><h3 id="proc/syncRegex"><aside class="declaration">proc </aside>syncRegex<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/1bd353b092e6be6aa34832fb422979c4436785fd/code/modules/goonchat/browserOutput.dm#L146">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;goonchat&#x2F;browserOutput.dm 146"/></a></aside>
        </h3>
        <p>Used to dynamically add regexes to the browser output. Currently only used by the IC filter.</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/tgstation/tgstation/tree/1bd353b092e6be6aa34832fb422979c4436785fd">1bd353b</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.2.1</a></footer>
</body>
</html>
